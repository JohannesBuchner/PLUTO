<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>PLUTO: General Structure</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PLUTO
   &#160;<span id="projectnumber">4.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">General Structure </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#main_sec1">1 Overview</a><ul><li class="level2"><a href="#main_subsection1">1.1 Naming Convention and Coding Style</a></li>
</ul>
</li>
<li class="level1"><a href="#main_sec2">2 Updating Strategy</a></li>
<li class="level1"><a href="#main_sec3">3 Parallelization</a></li>
<li class="level1"><a href="#main_sec4">4 I/O</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="main_sec1"></a>
1 Overview</h1>
<p>PLUTO is a freely-distributed software for the numerical solution of mixed hyperbolic/parabolic systems of partial differential equations (conservation laws) targeting high Mach number flows in astrophysical fluid dynamics. The code is designed with a modular and flexible structure whereby different numerical algorithms can be separately combined to solve systems of conservation laws using the finite volume or finite difference approach based on Godunov-type schemes.</p>
<p>Equations are discretized and solved on a structured mesh that can be either static or adaptive. For the latter functionality, PLUTO relies on the Chombo library (freely available at <a href="https://commons.lbl.gov/display/chombo/">https://commons.lbl.gov/display/chombo/</a>) which provides a distributed infrastructure for parallel calculations over block-structured, adaptively refined grids.</p>
<p>The static grid version of PLUTO is entirely written in the C programming language while the adaptive mesh refinement (AMR) version requires also C++ and Fortran for compiling the interface with CHOMBO.</p>
<p>A comprehensive description of the code design, phsyics module and method implementation may be found, for the static grid version, in <em> Mignone et al., ApJS (2007) 170, 228 </em> and, for the AMR version, in <em> Mignone et al., ApJS (2012) 198, 7 </em>.</p>
<p>The code can run from a single workstation up to several thousands processors using the Message Passing Interface (MPI) to achieve highly scalable parallel performance.</p>
<p>The software is developed at the Dipartimento di Fisica, Torino University in a joint collaboration with INAF, Osservatorio Astronomico di Torino and the SCAI Department of CINECA in Bologna. (<a href="http://www.hpc.cineca.it">http://www.hpc.cineca.it</a>). The code can be freely downloaded at <em><a href="http://plutocode.ph.unito.it/">http://plutocode.ph.unito.it/</a></em>.</p>
<p>The supported physics modules include solvers for classical hydrodynamics, special relativistic hydro, magnetohydrodynamics (MHD) and (special) relativistic MHD. Non-ideal processes can be included among:</p>
<ul>
<li>Viscosity (HD, MHD);</li>
<li>Thermal condution (HD, MHD);</li>
<li>Resistivity (MHD);</li>
<li>Optically thin cooling.</li>
</ul>
<p>Source files are located in the <code>Src/</code> directory where module files are grouped together inside sub-directories.</p>
<p>PLUTO is developed and maintained by A. Mignone although a number of people are actively contributing to its development through valuable support. In particular:</p>
<ul>
<li>A. Mignone (main developer)</li>
<li>C. Zanni (Chombo, AMR)</li>
<li>B. Vaidya (EoS, Cooling, pyPLUTO, Particles)</li>
<li>T. Matsakos (Resistivity, thermal conductio and Super Time stepping)</li>
<li>G. Muscianisi (parallelization, I/O)</li>
<li>P. Tzeferacos (Viscosity, MHD, Super-Time-Stepping, Finite Difference)</li>
<li>O. Tesileanu (Cooling)</li>
</ul>
<h2><a class="anchor" id="main_subsection1"></a>
1.1 Naming Convention and Coding Style</h2>
<p>Naming conventions have been adopted in order to comply with a more consistent coding style. This avoids the confusion between function, macro and global variable names generated by the mixed-up style present in previous releases:</p><ul>
<li>function names appear in upper CamelCase style where compound words or phrases are joined without spaces or underscores and have initial capital letters, e.g., <code>MyFunctionName()</code>;</li>
<li>macros are all in upper case with words separated by underscores '<code>_</code> ', e.g. <code><a class="el" href="macros_8h.html#a37cf9c7b0ebfa29ab7724244807e240b">ABS_MIN()</a></code>, <code>DOM_LOOP()</code>, etc...; Macro definitions are mostly located inside <a class="el" href="pluto_8h.html" title="PLUTO main header file. ">pluto.h</a>.</li>
<li><p class="startli">global variables use a lower camelCase and are prefixed with a '<code>g_</code> ' if they are common to the whole code or with the module name abbreviation if the are defined inside a module. For instance, <code>g_gamma</code>, <code>g_stepNumber</code> or <code>g_isoSoundSpeed</code> are used to denote the specific heat ratio <img class="formulaInl" alt="$ \Gamma $" src="form_25.png"/>, the current integration step number or the isothermal sound speed, respectively. Documentation for global variables may be found in <a class="el" href="globals_8h.html" title="Collects global variables definitions. ">globals.h</a>. Likewise, variables like <code><a class="el" href="glm_8h.html#a7f176850b7d2e1bc4d2f50b3c52bff47">glm_ch</a></code> or <code>::sb_q</code> are proper to the GLM-MHD module ('<code>glm</code> ') or to the shearing-box module ('<code>sb</code> ').</p>
<p class="startli">The only exceptions to this rule are integer global variables that are initialized only once at the beginning of the integration, such as the number of points (e.g. <code>NX1_TOT</code>, <code>NX2_TOT</code>, <code></code>...) or the lower and upper indices of the computational domain (e.g. <code>IBEG</code> ... <code>KEND</code>).</p>
</li>
<li>Direction-related quantities (grid inidices, variable names) are generically labeled with <img class="formulaInl" alt="$ x_1, x_2, x_3 $" src="form_26.png"/> and the corresponding grid inidices are <code>i</code>, <code>j</code>, <code>k</code>. We adopt the same convention when naming direction-related variables or indices, e.g, <code>VX1</code>, <code></code>..., <code>BX3</code> etc.</li>
</ul>
<h1><a class="anchor" id="main_sec2"></a>
2 Updating Strategy</h1>
<p>The primary vectors being used as arguments throughout the code are the 4-dimensional arrays of cell and face centered <em>primitive</em> variables contained inside the structure <code><a class="el" href="struct_data.html">Data</a></code>, i.e., <code>Data-&gt;Vc</code> and <code>Data-&gt;Vs</code>, respectively.</p>
<p>Primitive variables are preferred over conservative ones since they are more convenient for assigning initial and boundary conditions, piecewise reconstruction inside computational zones and source term integration. The primary integration loop is located inside <code><a class="el" href="main_8c.html" title="PLUTO main function. ">main.c</a></code> and the <code> Sweep/Unsplit </code> functions perform the actual integrations. Time stepping functions are handled by one between three different algorithms and may be found under the <code>Src/Time_Stepping/</code> directory. Dimensionally split marching schemes are coded in <code>sweep.c</code>, Runge-Kutta unsplit methods inside <code>unsplit.c</code> and the Corner-Transport Upwind (CTU) inside <code>unsplit_ctu.c</code>. Schematically, starting with a vector of primitive variables <img class="formulaInl" alt="$ \vec{V}^n$" src="form_27.png"/> at time level <img class="formulaInl" alt="$t=t^n$" src="form_28.png"/>, a single time step update involves the following sequence of tasks:</p>
<ul>
<li>Assignment of boundary conditions through the <a class="el" href="boundary_8c.html#a737d3862f4cf347b9f2216b6310edde7">Boundary()</a> function.</li>
<li>Piecewise polynomial reconstruction (on primitive or characteristic variables) inside the zone. This yields 1-D left and right states, <img class="formulaInl" alt="$ \vec{V}_L $" src="form_29.png"/> and <img class="formulaInl" alt="$ \vec{V}_R $" src="form_30.png"/> at cell interfaces. State construction functions are collected all together under <code>Src/States</code>.</li>
<li>Computation of 1-D inter-cell fluxes <img class="formulaInl" alt="$ \vec{\cal F} \equiv \vec{\cal F}(\vec{V}_L, \vec{V}_R)$" src="form_31.png"/> via a Riemann solver function, usually a pointer to a Riemann_Solver function, properly initialized by the routine <code>SetSolver</code> by each physics module.</li>
<li>Computation of the right hand side (or solution increment) <img class="formulaInl" alt="$\vec{\cal R}$" src="form_32.png"/> through the <a class="el" href="_m_h_d_2rhs_8c.html#a40f73065d641b8cd85b6d957cb453c06">RightHandSide()</a> function.</li>
<li>Conservative update <img class="formulaInl" alt="$ \vec{U}^{n+1} = \vec{U}^n + \vec{\cal R}$" src="form_33.png"/>.</li>
<li>Final conervative-to-primitive conversion, <img class="formulaInl" alt="$ \vec{U}^{n+1}\to \vec{V}^{n+1} $" src="form_34.png"/>.</li>
</ul>
<h1><a class="anchor" id="main_sec3"></a>
3 Parallelization</h1>
<p>PLUTO makes usage of the MPI library for parallel computations. The parallel interface for the static grid version is located under <code>Src/Parallel</code> where a compact and reduced subset of the former ArrayLib (AL) has been largely adapted, optimized and incorporated into the code, see <a class="el" href="page1.html#Parallel_page">Parallel_page</a>. The parallel API adopts basically provides a) an abstraction for distributed array objects, and b) simple interfaces to the underlying message passing routines (MPI). The adopted parallelization model is the usual one of distributed arrays augmented with guard cells (ghost points) to deal with boundary conditions. The size of the guard cells is determined by the stencil of the discretized differential operator</p>
<p>Parallelization for the AMR version of PLUTO is separately handled by the Chombo library which comes with its own independent MPI interface.</p>
<h1><a class="anchor" id="main_sec4"></a>
4 I/O</h1>
<p>Different data formats are available for I/O both for serial and heavily parallelized applications. The main output driver is <a class="el" href="write__data_8c.html" title="Main output driver. ">write_data.c</a> which provides basic calling mechanism for standard raw binary, VTK, hdf5, ascii data file and images (ppm and png). Input from binary files is controlled by <a class="el" href="restart_8c.html" title="Restart PLUTO from binary or HDF5 double precision data files. ">restart.c</a>.</p>
<p>Input/output is provided using different data formats, namely raw binary, VTK or HDF5. handled supports different data formats for I/O and most of them are fully parallel </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 31 2015 12:33:06 for PLUTO by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
